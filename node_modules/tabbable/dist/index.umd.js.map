{"version":3,"file":"index.umd.js","sources":["../src/index.js"],"sourcesContent":["const candidateSelectors = [\n  'input',\n  'select',\n  'textarea',\n  'a[href]',\n  'button',\n  '[tabindex]',\n  'audio[controls]',\n  'video[controls]',\n  '[contenteditable]:not([contenteditable=\"false\"])',\n  'details>summary:first-of-type',\n  'details',\n];\nconst candidateSelector = /* #__PURE__ */ candidateSelectors.join(',');\n\nconst matches =\n  typeof Element === 'undefined'\n    ? function () {}\n    : Element.prototype.matches ||\n      Element.prototype.msMatchesSelector ||\n      Element.prototype.webkitMatchesSelector;\n\nconst getCandidates = function (el, includeContainer, filter) {\n  let candidates = Array.prototype.slice.apply(\n    el.querySelectorAll(candidateSelector)\n  );\n  if (includeContainer && matches.call(el, candidateSelector)) {\n    candidates.unshift(el);\n  }\n  candidates = candidates.filter(filter);\n  return candidates;\n};\n\nconst isContentEditable = function (node) {\n  return node.contentEditable === 'true';\n};\n\nconst getTabindex = function (node) {\n  const tabindexAttr = parseInt(node.getAttribute('tabindex'), 10);\n\n  if (!isNaN(tabindexAttr)) {\n    return tabindexAttr;\n  }\n\n  // Browsers do not return `tabIndex` correctly for contentEditable nodes;\n  // so if they don't have a tabindex attribute specifically set, assume it's 0.\n  if (isContentEditable(node)) {\n    return 0;\n  }\n\n  // in Chrome, <details/>, <audio controls/> and <video controls/> elements get a default\n  //  `tabIndex` of -1 when the 'tabindex' attribute isn't specified in the DOM,\n  //  yet they are still part of the regular tab order; in FF, they get a default\n  //  `tabIndex` of 0; since Chrome still puts those elements in the regular tab\n  //  order, consider their tab index to be 0.\n  if (\n    (node.nodeName === 'AUDIO' ||\n      node.nodeName === 'VIDEO' ||\n      node.nodeName === 'DETAILS') &&\n    node.getAttribute('tabindex') === null\n  ) {\n    return 0;\n  }\n\n  return node.tabIndex;\n};\n\nconst sortOrderedTabbables = function (a, b) {\n  return a.tabIndex === b.tabIndex\n    ? a.documentOrder - b.documentOrder\n    : a.tabIndex - b.tabIndex;\n};\n\nconst isInput = function (node) {\n  return node.tagName === 'INPUT';\n};\n\nconst isHiddenInput = function (node) {\n  return isInput(node) && node.type === 'hidden';\n};\n\nconst isDetailsWithSummary = function (node) {\n  const r =\n    node.tagName === 'DETAILS' &&\n    Array.prototype.slice\n      .apply(node.children)\n      .some((child) => child.tagName === 'SUMMARY');\n  return r;\n};\n\nconst getCheckedRadio = function (nodes, form) {\n  for (let i = 0; i < nodes.length; i++) {\n    if (nodes[i].checked && nodes[i].form === form) {\n      return nodes[i];\n    }\n  }\n};\n\nconst isTabbableRadio = function (node) {\n  if (!node.name) {\n    return true;\n  }\n  const radioScope = node.form || node.ownerDocument;\n\n  const queryRadios = function (name) {\n    return radioScope.querySelectorAll(\n      'input[type=\"radio\"][name=\"' + name + '\"]'\n    );\n  };\n\n  let radioSet;\n  if (\n    typeof window !== 'undefined' &&\n    typeof window.CSS !== 'undefined' &&\n    typeof window.CSS.escape === 'function'\n  ) {\n    radioSet = queryRadios(window.CSS.escape(node.name));\n  } else {\n    try {\n      radioSet = queryRadios(node.name);\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error(\n        'Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s',\n        err.message\n      );\n      return false;\n    }\n  }\n\n  const checked = getCheckedRadio(radioSet, node.form);\n  return !checked || checked === node;\n};\n\nconst isRadio = function (node) {\n  return isInput(node) && node.type === 'radio';\n};\n\nconst isNonTabbableRadio = function (node) {\n  return isRadio(node) && !isTabbableRadio(node);\n};\n\nconst isHidden = function (node, displayCheck) {\n  if (getComputedStyle(node).visibility === 'hidden') {\n    return true;\n  }\n\n  const isDirectSummary = matches.call(node, 'details>summary:first-of-type');\n  const nodeUnderDetails = isDirectSummary ? node.parentElement : node;\n  if (matches.call(nodeUnderDetails, 'details:not([open]) *')) {\n    return true;\n  }\n  if (!displayCheck || displayCheck === 'full') {\n    while (node) {\n      if (getComputedStyle(node).display === 'none') {\n        return true;\n      }\n      node = node.parentElement;\n    }\n  } else if (displayCheck === 'non-zero-area') {\n    const { width, height } = node.getBoundingClientRect();\n    return width === 0 && height === 0;\n  }\n\n  return false;\n};\n\n// form fields (nested) inside a disabled fieldset are not focusable/tabbable\n//  unless they are in the _first_ <legend> element of the top-most disabled\n//  fieldset\nconst isDisabledFromFieldset = function (node) {\n  if (\n    isInput(node) ||\n    node.tagName === 'SELECT' ||\n    node.tagName === 'TEXTAREA' ||\n    node.tagName === 'BUTTON'\n  ) {\n    let parentNode = node.parentElement;\n    while (parentNode) {\n      if (parentNode.tagName === 'FIELDSET' && parentNode.disabled) {\n        // look for the first <legend> as an immediate child of the disabled\n        //  <fieldset>: if the node is in that legend, it'll be enabled even\n        //  though the fieldset is disabled; otherwise, the node is in a\n        //  secondary/subsequent legend, or somewhere else within the fieldset\n        //  (however deep nested) and it'll be disabled\n        for (let i = 0; i < parentNode.children.length; i++) {\n          const child = parentNode.children.item(i);\n          if (child.tagName === 'LEGEND') {\n            if (child.contains(node)) {\n              return false;\n            }\n\n            // the node isn't in the first legend (in doc order), so no matter\n            //  where it is now, it'll be disabled\n            return true;\n          }\n        }\n\n        // the node isn't in a legend, so no matter where it is now, it'll be disabled\n        return true;\n      }\n\n      parentNode = parentNode.parentElement;\n    }\n  }\n\n  // else, node's tabbable/focusable state should not be affected by a fieldset's\n  //  enabled/disabled state\n  return false;\n};\n\nconst isNodeMatchingSelectorFocusable = function (options, node) {\n  if (\n    node.disabled ||\n    isHiddenInput(node) ||\n    isHidden(node, options.displayCheck) ||\n    // For a details element with a summary, the summary element gets the focus\n    isDetailsWithSummary(node) ||\n    isDisabledFromFieldset(node)\n  ) {\n    return false;\n  }\n  return true;\n};\n\nconst isNodeMatchingSelectorTabbable = function (options, node) {\n  if (\n    !isNodeMatchingSelectorFocusable(options, node) ||\n    isNonTabbableRadio(node) ||\n    getTabindex(node) < 0\n  ) {\n    return false;\n  }\n  return true;\n};\n\nconst tabbable = function (el, options) {\n  options = options || {};\n\n  const regularTabbables = [];\n  const orderedTabbables = [];\n\n  const candidates = getCandidates(\n    el,\n    options.includeContainer,\n    isNodeMatchingSelectorTabbable.bind(null, options)\n  );\n\n  candidates.forEach(function (candidate, i) {\n    const candidateTabindex = getTabindex(candidate);\n    if (candidateTabindex === 0) {\n      regularTabbables.push(candidate);\n    } else {\n      orderedTabbables.push({\n        documentOrder: i,\n        tabIndex: candidateTabindex,\n        node: candidate,\n      });\n    }\n  });\n\n  const tabbableNodes = orderedTabbables\n    .sort(sortOrderedTabbables)\n    .map((a) => a.node)\n    .concat(regularTabbables);\n\n  return tabbableNodes;\n};\n\nconst focusable = function (el, options) {\n  options = options || {};\n\n  const candidates = getCandidates(\n    el,\n    options.includeContainer,\n    isNodeMatchingSelectorFocusable.bind(null, options)\n  );\n\n  return candidates;\n};\n\nconst isTabbable = function (node, options) {\n  options = options || {};\n  if (!node) {\n    throw new Error('No node provided');\n  }\n  if (matches.call(node, candidateSelector) === false) {\n    return false;\n  }\n  return isNodeMatchingSelectorTabbable(options, node);\n};\n\nconst focusableCandidateSelector = /* #__PURE__ */ candidateSelectors\n  .concat('iframe')\n  .join(',');\n\nconst isFocusable = function (node, options) {\n  options = options || {};\n  if (!node) {\n    throw new Error('No node provided');\n  }\n  if (matches.call(node, focusableCandidateSelector) === false) {\n    return false;\n  }\n  return isNodeMatchingSelectorFocusable(options, node);\n};\n\nexport { tabbable, focusable, isTabbable, isFocusable };\n"],"names":["candidateSelectors","candidateSelector","join","matches","Element","prototype","msMatchesSelector","webkitMatchesSelector","getCandidates","el","includeContainer","filter","candidates","Array","slice","apply","querySelectorAll","call","unshift","isContentEditable","node","contentEditable","getTabindex","tabindexAttr","parseInt","getAttribute","isNaN","nodeName","tabIndex","sortOrderedTabbables","a","b","documentOrder","isInput","tagName","isHiddenInput","type","isDetailsWithSummary","r","children","some","child","getCheckedRadio","nodes","form","i","length","checked","isTabbableRadio","name","radioScope","ownerDocument","queryRadios","radioSet","window","CSS","escape","err","console","error","message","isRadio","isNonTabbableRadio","isHidden","displayCheck","getComputedStyle","visibility","isDirectSummary","nodeUnderDetails","parentElement","display","getBoundingClientRect","width","height","isDisabledFromFieldset","parentNode","disabled","item","contains","isNodeMatchingSelectorFocusable","options","isNodeMatchingSelectorTabbable","tabbable","regularTabbables","orderedTabbables","bind","forEach","candidate","candidateTabindex","push","tabbableNodes","sort","map","concat","focusable","isTabbable","Error","focusableCandidateSelector","isFocusable"],"mappings":";;;;;;;;;;;;;;;EAAA,IAAMA,kBAAkB,GAAG,CACzB,OADyB,EAEzB,QAFyB,EAGzB,UAHyB,EAIzB,SAJyB,EAKzB,QALyB,EAMzB,YANyB,EAOzB,iBAPyB,EAQzB,iBARyB,EASzB,kDATyB,EAUzB,+BAVyB,EAWzB,SAXyB,CAA3B;EAaA,IAAMC,iBAAiB,kBAAmBD,kBAAkB,CAACE,IAAnB,CAAwB,GAAxB,CAA1C;EAEA,IAAMC,OAAO,GACX,OAAOC,OAAP,KAAmB,WAAnB,GACI,YAAY,EADhB,GAEIA,OAAO,CAACC,SAAR,CAAkBF,OAAlB,IACAC,OAAO,CAACC,SAAR,CAAkBC,iBADlB,IAEAF,OAAO,CAACC,SAAR,CAAkBE,qBALxB;;EAOA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAAUC,EAAV,EAAcC,gBAAd,EAAgCC,MAAhC,EAAwC;EAC5D,MAAIC,UAAU,GAAGC,KAAK,CAACR,SAAN,CAAgBS,KAAhB,CAAsBC,KAAtB,CACfN,EAAE,CAACO,gBAAH,CAAoBf,iBAApB,CADe,CAAjB;;EAGA,MAAIS,gBAAgB,IAAIP,OAAO,CAACc,IAAR,CAAaR,EAAb,EAAiBR,iBAAjB,CAAxB,EAA6D;EAC3DW,IAAAA,UAAU,CAACM,OAAX,CAAmBT,EAAnB;EACD;;EACDG,EAAAA,UAAU,GAAGA,UAAU,CAACD,MAAX,CAAkBA,MAAlB,CAAb;EACA,SAAOC,UAAP;EACD,CATD;;EAWA,IAAMO,iBAAiB,GAAG,SAApBA,iBAAoB,CAAUC,IAAV,EAAgB;EACxC,SAAOA,IAAI,CAACC,eAAL,KAAyB,MAAhC;EACD,CAFD;;EAIA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAAUF,IAAV,EAAgB;EAClC,MAAMG,YAAY,GAAGC,QAAQ,CAACJ,IAAI,CAACK,YAAL,CAAkB,UAAlB,CAAD,EAAgC,EAAhC,CAA7B;;EAEA,MAAI,CAACC,KAAK,CAACH,YAAD,CAAV,EAA0B;EACxB,WAAOA,YAAP;EACD,GALiC;EAQlC;;;EACA,MAAIJ,iBAAiB,CAACC,IAAD,CAArB,EAA6B;EAC3B,WAAO,CAAP;EACD,GAXiC;EAclC;EACA;EACA;EACA;;;EACA,MACE,CAACA,IAAI,CAACO,QAAL,KAAkB,OAAlB,IACCP,IAAI,CAACO,QAAL,KAAkB,OADnB,IAECP,IAAI,CAACO,QAAL,KAAkB,SAFpB,KAGAP,IAAI,CAACK,YAAL,CAAkB,UAAlB,MAAkC,IAJpC,EAKE;EACA,WAAO,CAAP;EACD;;EAED,SAAOL,IAAI,CAACQ,QAAZ;EACD,CA5BD;;EA8BA,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAUC,CAAV,EAAaC,CAAb,EAAgB;EAC3C,SAAOD,CAAC,CAACF,QAAF,KAAeG,CAAC,CAACH,QAAjB,GACHE,CAAC,CAACE,aAAF,GAAkBD,CAAC,CAACC,aADjB,GAEHF,CAAC,CAACF,QAAF,GAAaG,CAAC,CAACH,QAFnB;EAGD,CAJD;;EAMA,IAAMK,OAAO,GAAG,SAAVA,OAAU,CAAUb,IAAV,EAAgB;EAC9B,SAAOA,IAAI,CAACc,OAAL,KAAiB,OAAxB;EACD,CAFD;;EAIA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAAUf,IAAV,EAAgB;EACpC,SAAOa,OAAO,CAACb,IAAD,CAAP,IAAiBA,IAAI,CAACgB,IAAL,KAAc,QAAtC;EACD,CAFD;;EAIA,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAUjB,IAAV,EAAgB;EAC3C,MAAMkB,CAAC,GACLlB,IAAI,CAACc,OAAL,KAAiB,SAAjB,IACArB,KAAK,CAACR,SAAN,CAAgBS,KAAhB,CACGC,KADH,CACSK,IAAI,CAACmB,QADd,EAEGC,IAFH,CAEQ,UAACC,KAAD;EAAA,WAAWA,KAAK,CAACP,OAAN,KAAkB,SAA7B;EAAA,GAFR,CAFF;EAKA,SAAOI,CAAP;EACD,CAPD;;EASA,IAAMI,eAAe,GAAG,SAAlBA,eAAkB,CAAUC,KAAV,EAAiBC,IAAjB,EAAuB;EAC7C,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,KAAK,CAACG,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;EACrC,QAAIF,KAAK,CAACE,CAAD,CAAL,CAASE,OAAT,IAAoBJ,KAAK,CAACE,CAAD,CAAL,CAASD,IAAT,KAAkBA,IAA1C,EAAgD;EAC9C,aAAOD,KAAK,CAACE,CAAD,CAAZ;EACD;EACF;EACF,CAND;;EAQA,IAAMG,eAAe,GAAG,SAAlBA,eAAkB,CAAU5B,IAAV,EAAgB;EACtC,MAAI,CAACA,IAAI,CAAC6B,IAAV,EAAgB;EACd,WAAO,IAAP;EACD;;EACD,MAAMC,UAAU,GAAG9B,IAAI,CAACwB,IAAL,IAAaxB,IAAI,CAAC+B,aAArC;;EAEA,MAAMC,WAAW,GAAG,SAAdA,WAAc,CAAUH,IAAV,EAAgB;EAClC,WAAOC,UAAU,CAAClC,gBAAX,CACL,+BAA+BiC,IAA/B,GAAsC,IADjC,CAAP;EAGD,GAJD;;EAMA,MAAII,QAAJ;;EACA,MACE,OAAOC,MAAP,KAAkB,WAAlB,IACA,OAAOA,MAAM,CAACC,GAAd,KAAsB,WADtB,IAEA,OAAOD,MAAM,CAACC,GAAP,CAAWC,MAAlB,KAA6B,UAH/B,EAIE;EACAH,IAAAA,QAAQ,GAAGD,WAAW,CAACE,MAAM,CAACC,GAAP,CAAWC,MAAX,CAAkBpC,IAAI,CAAC6B,IAAvB,CAAD,CAAtB;EACD,GAND,MAMO;EACL,QAAI;EACFI,MAAAA,QAAQ,GAAGD,WAAW,CAAChC,IAAI,CAAC6B,IAAN,CAAtB;EACD,KAFD,CAEE,OAAOQ,GAAP,EAAY;EACZ;EACAC,MAAAA,OAAO,CAACC,KAAR,CACE,0IADF,EAEEF,GAAG,CAACG,OAFN;EAIA,aAAO,KAAP;EACD;EACF;;EAED,MAAMb,OAAO,GAAGL,eAAe,CAACW,QAAD,EAAWjC,IAAI,CAACwB,IAAhB,CAA/B;EACA,SAAO,CAACG,OAAD,IAAYA,OAAO,KAAK3B,IAA/B;EACD,CAlCD;;EAoCA,IAAMyC,OAAO,GAAG,SAAVA,OAAU,CAAUzC,IAAV,EAAgB;EAC9B,SAAOa,OAAO,CAACb,IAAD,CAAP,IAAiBA,IAAI,CAACgB,IAAL,KAAc,OAAtC;EACD,CAFD;;EAIA,IAAM0B,kBAAkB,GAAG,SAArBA,kBAAqB,CAAU1C,IAAV,EAAgB;EACzC,SAAOyC,OAAO,CAACzC,IAAD,CAAP,IAAiB,CAAC4B,eAAe,CAAC5B,IAAD,CAAxC;EACD,CAFD;;EAIA,IAAM2C,QAAQ,GAAG,SAAXA,QAAW,CAAU3C,IAAV,EAAgB4C,YAAhB,EAA8B;EAC7C,MAAIC,gBAAgB,CAAC7C,IAAD,CAAhB,CAAuB8C,UAAvB,KAAsC,QAA1C,EAAoD;EAClD,WAAO,IAAP;EACD;;EAED,MAAMC,eAAe,GAAGhE,OAAO,CAACc,IAAR,CAAaG,IAAb,EAAmB,+BAAnB,CAAxB;EACA,MAAMgD,gBAAgB,GAAGD,eAAe,GAAG/C,IAAI,CAACiD,aAAR,GAAwBjD,IAAhE;;EACA,MAAIjB,OAAO,CAACc,IAAR,CAAamD,gBAAb,EAA+B,uBAA/B,CAAJ,EAA6D;EAC3D,WAAO,IAAP;EACD;;EACD,MAAI,CAACJ,YAAD,IAAiBA,YAAY,KAAK,MAAtC,EAA8C;EAC5C,WAAO5C,IAAP,EAAa;EACX,UAAI6C,gBAAgB,CAAC7C,IAAD,CAAhB,CAAuBkD,OAAvB,KAAmC,MAAvC,EAA+C;EAC7C,eAAO,IAAP;EACD;;EACDlD,MAAAA,IAAI,GAAGA,IAAI,CAACiD,aAAZ;EACD;EACF,GAPD,MAOO,IAAIL,YAAY,KAAK,eAArB,EAAsC;EAC3C,gCAA0B5C,IAAI,CAACmD,qBAAL,EAA1B;EAAA,QAAQC,KAAR,yBAAQA,KAAR;EAAA,QAAeC,MAAf,yBAAeA,MAAf;;EACA,WAAOD,KAAK,KAAK,CAAV,IAAeC,MAAM,KAAK,CAAjC;EACD;;EAED,SAAO,KAAP;EACD,CAvBD;EA0BA;EACA;;;EACA,IAAMC,sBAAsB,GAAG,SAAzBA,sBAAyB,CAAUtD,IAAV,EAAgB;EAC7C,MACEa,OAAO,CAACb,IAAD,CAAP,IACAA,IAAI,CAACc,OAAL,KAAiB,QADjB,IAEAd,IAAI,CAACc,OAAL,KAAiB,UAFjB,IAGAd,IAAI,CAACc,OAAL,KAAiB,QAJnB,EAKE;EACA,QAAIyC,UAAU,GAAGvD,IAAI,CAACiD,aAAtB;;EACA,WAAOM,UAAP,EAAmB;EACjB,UAAIA,UAAU,CAACzC,OAAX,KAAuB,UAAvB,IAAqCyC,UAAU,CAACC,QAApD,EAA8D;EAC5D;EACA;EACA;EACA;EACA;EACA,aAAK,IAAI/B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8B,UAAU,CAACpC,QAAX,CAAoBO,MAAxC,EAAgDD,CAAC,EAAjD,EAAqD;EACnD,cAAMJ,KAAK,GAAGkC,UAAU,CAACpC,QAAX,CAAoBsC,IAApB,CAAyBhC,CAAzB,CAAd;;EACA,cAAIJ,KAAK,CAACP,OAAN,KAAkB,QAAtB,EAAgC;EAC9B,gBAAIO,KAAK,CAACqC,QAAN,CAAe1D,IAAf,CAAJ,EAA0B;EACxB,qBAAO,KAAP;EACD,aAH6B;EAM9B;;;EACA,mBAAO,IAAP;EACD;EACF,SAjB2D;;;EAoB5D,eAAO,IAAP;EACD;;EAEDuD,MAAAA,UAAU,GAAGA,UAAU,CAACN,aAAxB;EACD;EACF,GAlC4C;EAqC7C;;;EACA,SAAO,KAAP;EACD,CAvCD;;EAyCA,IAAMU,+BAA+B,GAAG,SAAlCA,+BAAkC,CAAUC,OAAV,EAAmB5D,IAAnB,EAAyB;EAC/D,MACEA,IAAI,CAACwD,QAAL,IACAzC,aAAa,CAACf,IAAD,CADb,IAEA2C,QAAQ,CAAC3C,IAAD,EAAO4D,OAAO,CAAChB,YAAf,CAFR;EAIA3B,EAAAA,oBAAoB,CAACjB,IAAD,CAJpB,IAKAsD,sBAAsB,CAACtD,IAAD,CANxB,EAOE;EACA,WAAO,KAAP;EACD;;EACD,SAAO,IAAP;EACD,CAZD;;EAcA,IAAM6D,8BAA8B,GAAG,SAAjCA,8BAAiC,CAAUD,OAAV,EAAmB5D,IAAnB,EAAyB;EAC9D,MACE,CAAC2D,+BAA+B,CAACC,OAAD,EAAU5D,IAAV,CAAhC,IACA0C,kBAAkB,CAAC1C,IAAD,CADlB,IAEAE,WAAW,CAACF,IAAD,CAAX,GAAoB,CAHtB,EAIE;EACA,WAAO,KAAP;EACD;;EACD,SAAO,IAAP;EACD,CATD;;MAWM8D,QAAQ,GAAG,SAAXA,QAAW,CAAUzE,EAAV,EAAcuE,OAAd,EAAuB;EACtCA,EAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;EAEA,MAAMG,gBAAgB,GAAG,EAAzB;EACA,MAAMC,gBAAgB,GAAG,EAAzB;EAEA,MAAMxE,UAAU,GAAGJ,aAAa,CAC9BC,EAD8B,EAE9BuE,OAAO,CAACtE,gBAFsB,EAG9BuE,8BAA8B,CAACI,IAA/B,CAAoC,IAApC,EAA0CL,OAA1C,CAH8B,CAAhC;EAMApE,EAAAA,UAAU,CAAC0E,OAAX,CAAmB,UAAUC,SAAV,EAAqB1C,CAArB,EAAwB;EACzC,QAAM2C,iBAAiB,GAAGlE,WAAW,CAACiE,SAAD,CAArC;;EACA,QAAIC,iBAAiB,KAAK,CAA1B,EAA6B;EAC3BL,MAAAA,gBAAgB,CAACM,IAAjB,CAAsBF,SAAtB;EACD,KAFD,MAEO;EACLH,MAAAA,gBAAgB,CAACK,IAAjB,CAAsB;EACpBzD,QAAAA,aAAa,EAAEa,CADK;EAEpBjB,QAAAA,QAAQ,EAAE4D,iBAFU;EAGpBpE,QAAAA,IAAI,EAAEmE;EAHc,OAAtB;EAKD;EACF,GAXD;EAaA,MAAMG,aAAa,GAAGN,gBAAgB,CACnCO,IADmB,CACd9D,oBADc,EAEnB+D,GAFmB,CAEf,UAAC9D,CAAD;EAAA,WAAOA,CAAC,CAACV,IAAT;EAAA,GAFe,EAGnByE,MAHmB,CAGZV,gBAHY,CAAtB;EAKA,SAAOO,aAAP;EACD;;MAEKI,SAAS,GAAG,SAAZA,SAAY,CAAUrF,EAAV,EAAcuE,OAAd,EAAuB;EACvCA,EAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;EAEA,MAAMpE,UAAU,GAAGJ,aAAa,CAC9BC,EAD8B,EAE9BuE,OAAO,CAACtE,gBAFsB,EAG9BqE,+BAA+B,CAACM,IAAhC,CAAqC,IAArC,EAA2CL,OAA3C,CAH8B,CAAhC;EAMA,SAAOpE,UAAP;EACD;;MAEKmF,UAAU,GAAG,SAAbA,UAAa,CAAU3E,IAAV,EAAgB4D,OAAhB,EAAyB;EAC1CA,EAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;;EACA,MAAI,CAAC5D,IAAL,EAAW;EACT,UAAM,IAAI4E,KAAJ,CAAU,kBAAV,CAAN;EACD;;EACD,MAAI7F,OAAO,CAACc,IAAR,CAAaG,IAAb,EAAmBnB,iBAAnB,MAA0C,KAA9C,EAAqD;EACnD,WAAO,KAAP;EACD;;EACD,SAAOgF,8BAA8B,CAACD,OAAD,EAAU5D,IAAV,CAArC;EACD;;EAED,IAAM6E,0BAA0B,kBAAmBjG,kBAAkB,CAClE6F,MADgD,CACzC,QADyC,EAEhD3F,IAFgD,CAE3C,GAF2C,CAAnD;;MAIMgG,WAAW,GAAG,SAAdA,WAAc,CAAU9E,IAAV,EAAgB4D,OAAhB,EAAyB;EAC3CA,EAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;;EACA,MAAI,CAAC5D,IAAL,EAAW;EACT,UAAM,IAAI4E,KAAJ,CAAU,kBAAV,CAAN;EACD;;EACD,MAAI7F,OAAO,CAACc,IAAR,CAAaG,IAAb,EAAmB6E,0BAAnB,MAAmD,KAAvD,EAA8D;EAC5D,WAAO,KAAP;EACD;;EACD,SAAOlB,+BAA+B,CAACC,OAAD,EAAU5D,IAAV,CAAtC;EACD;;;;;;;;;;;;;"}